webpackJsonp([1],{"7zck":function(e,t){},"9fOT":function(e,t){},A41J:function(e,t){},HuFd:function(e,t){},LGx0:function(e,t){e.exports={profiles:"hsl(1.2221634632337608, 63.99043908882861%, 26.860315678359132%)",project_members:"hsl(334.20877636683076, 54.72122944471474%, 0.8258295476754363%)",project_owner:"hsl(86.88517474392467, 68.89158357403191%, 44.411075656514605%)",projects:"hsl(147.23610384187165, 97.35678770043427%, 40.335177763679546%)",tags:"hsl(247.3712053375716, 67.72470657885594%, 10.897243094819977%)",tasks:"hsl(221.27048826026186, 62.42865502339468%, 50.757648678182164%)",user_tags:"hsl(61.88084451723857, 65.51497487439119%, 52.19374417164229%)",users:"hsl(144.15223787690394, 42.20191938169789%, 33.862981528376764%)"}},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},s,!1,function(e){a("9fOT")},null,null).exports,o=a("/ocq"),i=a("fZjL"),l=a.n(i),c=a("woOf"),d=a.n(c),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-flex",{on:{click:function(t){e.emitToggle(e.tKey)}}},[a("v-card",{staticClass:"drawing",style:{borderTop:"14px solid",borderRadius:"8px",borderColor:e.color,boxShadow:"0 4px 6px 0 hsla(0, 0%, 0%, 0.2)"},attrs:{flat:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("h1",[e._v(e._s(e.tKey))])]),e._v(" "),e._l(e.tValue,function(t,r){return e.toggleInfo?a("v-flex",{key:r},[a("v-card-text",[a("h2",{style:{color:t in e.colors?e.colors[t]:"grey"}},[e._v(e._s(r))]),e._v(" "),a("h3",{style:{color:t in e.colors?e.colors[t]:"hsl(249,9%,80%)"}},[e._v(e._s(t))])])],1):e._e()}),e._v(" "),a("v-card-text")],2)],1)},staticRenderFns:[]};var h=a("VU/8")({name:"Table",props:["tKey","tValue","color","colors","toggleInfo"],data:function(){return{}},computed:{},methods:{emitToggle:function(e){this.$emit("toggle",e)}},components:{}},u,!1,function(e){a("A41J")},"data-v-30767e61",null).exports,p={name:"SideMenu",props:["tables","child","parent"],data:function(){return{}},computed:{theChild:{get:function(){return this.child},set:function(){console.log("from cjild"),this.$emit("toggleFilter","child")}},theParent:{get:function(){return this.parent},set:function(){this.$emit("toggleFilter","parent")}}},methods:{emitToggle:function(e){this.$emit("toggle",e)}},components:{}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{attrs:{app:"",clipped:"",fixed:"",right:"",permanent:"","hide-overlay":"","mini-variant.sync":"",width:"150"}},[a("v-switch",{attrs:{label:"Refered by"},model:{value:e.theChild,callback:function(t){e.theChild=t},expression:"theChild"}}),e._v(" "),a("v-switch",{attrs:{label:"Reference",color:"green"},model:{value:e.theParent,callback:function(t){e.theParent=t},expression:"theParent"}}),e._v(" "),a("v-spacer",[a("hr")]),e._v(" "),e._l(e.tables,function(t,r){return a("v-card",{key:r},[a("v-card-title",{attrs:{"primary-title":""},on:{click:function(a){e.emitToggle(t)}}},[e._v(e._s(t))])],1)})],2)},staticRenderFns:[]};var m=a("VU/8")(p,f,!1,function(e){a("xBa9")},"data-v-40e755c6",null).exports,g=a("LGx0"),v=a.n(g),_=a("gagz"),b=a.n(_),x=a("RQBV"),T=a.n(x),j={name:"HelloWorld",components:{Table:h,SideMenu:m},data:function(){return{noFile:!0,msg:"Welcome to Your Vue.js App",child:!0,toggleInfo:!0,choice:"",parent:!0,selected:[],allTables:{},tables:{},tableNames:[],references:[],colors:{},text:[]}},computed:{},methods:{colorGen:function(){var e=[];return e[0]=Math.random()*Math.floor(360),e[1]=Math.random()*Math.floor(80)+20+"%",e[2]=Math.random()*Math.floor(80)+"%","hsl("+e[0]+", "+e[1]+", "+e[2]+")"},parseKnex:function(e){for(var t=this,a=/CREATE TABLE `?(\w+)`? ?∆(.[^Ω]*)Ω/g,r=/CONSTRAINT `?(\w+)`? FOREIGN KEY \([`]?(\w+)[`]?\) REFERENCES (.[^(]+)/g,s=void 0,n=void 0,o=1,i=function(){s.index===a.lastIndex&&a.lastIndex++;var e={};s[2].split(",").map(function(e){return e.trim()}).filter(function(e){return!(e.startsWith("CONSTRAINT")||e.startsWith("KEY")||e.startsWith("PRIMARY"))}).map(function(t,a){var r=t.split(" ");e[[r[0].replace(/`| /g,"")]]=r[1]+("character"==r[1]?" "+r[2].split("(")[1].split(")")[0]:"")}),t.tableNames.push([s[1],o++]),t.$set(t.tables,s[1],e),t.$set(t.colors,s[1],t.colorGen())};null!==(s=a.exec(e));)i();for(;null!==(n=r.exec(e));){n.index===r.lastIndex&&r.lastIndex++;var l=n[1].replace(/_\w[^_]+_id_foreign/,""),c=n[3].replace(/`| /g,"");this.references.push({tableName:l,ref:c,val:n[2]}),l in this.tables&&(this.tables[l][[n[2]]]=c)}this.allTables=d()({},this.tables)},read:function(e){var t=this;if(!e)return this.allTables=T.a,this.tables=T.a,this.colors=v.a,this.references=b.a,void(this.noFile=!1);d()(this.$data,this.$options.data.apply(this));for(var a,r=e.target.files,s=function(e,a){var r=new FileReader;r.onload=function(a){t.text.push(a.target.result.replace(/\(\s/g,"∆").replace(/\)(;| E)/g,"Ω").replace(/\n|\r/g,"")),t.parseKnex(t.text[e])},r.readAsText(a)},n=0;a=r[n];n++)s(n,a);this.noFile=!1},showAll:function(){this.tables=this.allTables},doTheThingFromChild:function(e){"child"==e?this.child=!this.child:"parent"==e&&(this.parent=!this.parent),this.doTheThing(this.choice,"from")},doTheThing:function(e,t){var a=this;console.log("doTheThing",e,t),e&&""!=e&&(this.choice=e,this.selected=[],this.selected.push(e),this.references.forEach(function(t){a.parent&&t.tableName==e&&a.selected.push(t.ref),a.child&&t.ref==e&&a.selected.unshift(t.tableName)}),this.tables=l()(this.allTables).filter(function(e){return a.selected.includes(e)}).reduce(function(e,t){return e[t]=a.allTables[t],e},{}))}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-layout",{staticStyle:{"padding-bottom":"5vh"},attrs:{"align-center":"","justify-center":"","align-content-center":""}},[a("input",{attrs:{type:"file"},on:{change:e.read}}),e._v(" "),e.noFile?a("v-btn",{on:{click:function(t){e.read()}}},[e._v("Demo")]):e._e()],1),e._v(" "),e.noFile?a("div",[a("h4",[e._v("Postgres: "),a("code",[e._v(" pg_dump -s databasename > file.sql\t")])]),e._v(" "),a("h4",[e._v("SQL: "),a("code",[e._v(" mysqldump -u root -p --no-data dbname > schema.sql")])]),e._v(" "),a("h5",[e._v(" Then use that file")])]):a("div",[a("v-switch",{attrs:{label:"show and hide info"},model:{value:e.toggleInfo,callback:function(t){e.toggleInfo=t},expression:"toggleInfo"}}),e._v(" "),a("v-btn",{attrs:{fab:"",color:"teal",fixed:"",bottom:"",left:""},on:{click:e.showAll}},[e._v("\n      All\n    ")]),e._v(" "),a("p",{staticClass:"subheading"},[e._v("\n      Click on a table and see what happens\n    ")]),e._v(" "),a("p",{staticClass:"caption"},[e._v("\n      Use cmd/ctrl "),a("b",[a("i",[e._v("+  -   0")])]),e._v(" to zoom/dezoom/orginal size\n    ")]),e._v(" "),e._l(e.selected,function(t,r){return a("v-chip",{key:r,attrs:{col:"",wrap:"",color:t===e.choice?"amber lighten-2":e.selected.indexOf(t)<e.selected.indexOf(e.choice)?"blue":"green"}},[e._v(e._s(t))])}),e._v(" "),a("SideMenu",{attrs:{child:e.child,parent:e.parent,tables:Object.keys(e.tables).sort()},on:{toggleFilter:e.doTheThingFromChild,toggle:e.doTheThing}}),e._v(" "),a("v-content",[a("v-layout",{attrs:{wrap:""},model:{value:e.tables,callback:function(t){e.tables=t},expression:"tables"}},[a("transition-group",{staticClass:"rs-flex",attrs:{name:"list"}},e._l(e.tables,function(t,r){return a("v-flex",{key:r},[a("Table",{attrs:{tKey:r,toggleInfo:e.toggleInfo,color:e.colors[r],colors:e.colors,tValue:t},on:{toggle:e.doTheThing}})],1)}))],1)],1)],2)],1)},staticRenderFns:[]};var y=a("VU/8")(j,w,!1,function(e){a("HuFd")},"data-v-997dc4b6",null).exports;r.a.use(o.a);var N=new o.a({routes:[{path:"/",name:"HelloWorld",component:y}]}),k=a("3EgV"),F=a.n(k);a("7zck");r.a.use(F.a),r.a.config.productionTip=!1,new r.a({el:"#app",router:N,components:{App:n},template:"<App/>"})},RQBV:function(e,t){e.exports={profiles:{id:"integer",user_id:"users",first_name:"character 64",last_name:"character 64",picture:"character 256",description:"text",creation_date:"timestamp",updated_at:"timestamp"},project_members:{id:"integer",user_id:"users",project_id:"projects",creation_date:"timestamp",updated_at:"timestamp"},project_owner:{id:"integer",company_id:"companies",project_id:"projects",creation_date:"timestamp",updated_at:"timestamp"},projects:{id:"integer",name:"character 128",user_id:"users",creation_date:"timestamp"},tags:{id:"integer",name:"character 64",creation_date:"timestamp"},tasks:{id:"integer",project_id:"projects",user_id:"users",tag_id:"tags",description:"text",start:"timestamp",'"end"':"timestamp"},user_tags:{id:"integer",user_id:"users",tag_id:"tags",creation_date:"timestamp",updated_at:"timestamp"},users:{id:"integer",username:"character 128",email:"character 128",password:"character 256",admin:"boolean",valid:"boolean",creation_date:"timestamp"}}},gagz:function(e,t){e.exports=[{tableName:"profiles",ref:"users",val:"user_id"},{tableName:"project_members",ref:"projects",val:"project_id"},{tableName:"project_members",ref:"users",val:"user_id"},{tableName:"project_owner",ref:"projects",val:"project_id"},{tableName:"projects",ref:"users",val:"user_id"},{tableName:"tasks",ref:"projects",val:"project_id"},{tableName:"tasks",ref:"tags",val:"tag_id"},{tableName:"tasks",ref:"users",val:"user_id"},{tableName:"user_tags",ref:"tags",val:"tag_id"},{tableName:"user_tags",ref:"users",val:"user_id"}]},xBa9:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9c59e26f89c2cf3bc40c.js.map